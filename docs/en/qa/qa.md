# 问答

问答这一栏记录了在开发和推广LEGENT时遇到的问题，包括平时讨论或公开汇报时被专业内或专业外人士问到的技术性或非技术性的问题，这里我们进行进一步的思考和解答，希望可以帮助解答疑惑，如有谬误欢迎指出。

##### 关于为什么要做这个环境

??? "平台所带的环境应该算一种沙盒，市面上已经有了，例如MineCraft，为什么要重新做一个？"
    Minecraft很好玩，也是可以进行算法研究的，但可能并不适合做泛化。这个游戏有其自己的特色，想扩展它很难，可以把它看作更难版的Atari Games，而不是通用的具身智能训练环境。它是方块世界，无法做许多精细操作，也存在浮空方块等不真实的物理。同时它有特定的合成线路和科技树，这个科技树也成为许多研究的评测指标。事实上要达成某些任务，例如挖钻石，靠规划也能实现，但这与智能的初衷相悖。因此做一个模拟现实，未来可扩展的训练环境是有意义的。

??? "为什么不用GTA5训练AI？有使用GTA5做自动驾驶研究的。"
    自动驾驶主要是视觉AI，玩游戏开车能看到画面，就可以给自动驾驶做训练。但如果涉及语言，就有grounding的问题，只有能获取游戏的所有内部信息才能做好，例如“把桌上的苹果拿给我”，这个训练是需要获取全局的信息才能训练的，而GTA5作为一款游戏，没有义务给AI研究打通游戏的训练接口，当然也有研究有尝试用Script Hook V来做，但并不方便。对通用AI训练的原生支持，和改装现有游戏肯定是不一样的。

    一个主要的抉择依据是，你想让AI会玩一款游戏，还是提供一个环境，让大模型获得较通用的具身体验，将语言ground到环境中，从而获得一个可泛化的具身语言模型基座。
    
    另外，GTA5作为一个评测环境是不错的。

??? tip "补充"

    通用的具身语言模型是非常基础性的研究，训练环境是一个核心组件，国外有Gibson、Habitat等许多训练环境的工作，国内却不怎么关注训练环境的编写工作。由于现实世界中训练AI昂贵、危险、不可加速不可扩展性，通用人工智能大概率先在虚拟世界中产生，进而可期地迁移到现实世界。自研一个训练环境是很有必要的。

##### 关于和其他具身环境比较

??? "LEGENT能替代掉Habitat这类环境吗？"
    不能。从定位上来说LEGENT是专为大模型定做的训练环境，语言+视觉+交互就定位了它要做通用的智能，环境的技术路线是给大语言模型具身的视觉体验，从而获得一个可泛化的具身语言模型基座。而Habitat等现有的环境适合视觉小模型，从action设计上可以看出。值得一提的是，Habitat有超高的采样效率，这对于做RL算法研究，用Habitat是非常好的。LEGENT全面拥抱生成环境和指令数据，对用户可扩展，如果进行大模型研究，是非常友好的，LEGENT让这个方向变得简单有趣。

##### 关于领域的可能性

??? "LEGENT里面也可以做navigation任务，能用到自动驾驶上吗？"
    理论上可以，包括使用一些Sim2Real的方法，但不实际。这个环境和自动驾驶的数据gap还是很大，自动驾驶对准确性要求非常高，这一点上就要求了环境所用的训练数据必须包含大量in-domain数据，进行专门训练。LEGENT旨在做通用的理解和交互，像自动驾驶这样专业的任务还是要专门做的，用CARLA环境肯定比任何具身智能的环境会更好。

??? "这个AI做出来未来能用到各种各样的游戏上吗？"
    理论上可以的，但还有很多路要走。LEGENT的奋斗目标是训练得到一个通用的具身语言模型。之后可以通过微调，prompt，外接memory和tool等方案应用到游戏中。例如我们设想一个场景，原神中的派蒙接入AI，能完全自主地交流、观察、行动，成为一个完全开放式的小助手。当然，如果游戏不是一个虚拟世界，gap会比较大，这类游戏可以用RL专门训练，不是用具身语言模型去解决。

??? "这个系统能做成好玩的游戏吗？"
    可以从“过家家”开始向外扩展。这里引用一位高手的观点：“过家家”就是AGI。

##### 关于技术实现

??? "这个系统是有个驱动吗，怎么从模型输出反映到人物执行上的？"
    如果说驱动的话，游戏的运行逻辑和机器人的ROS系统代码一样，就是控制agent的驱动。加上模型的输出就是agent的输出。

??? "模型会知道自己的具体位置吗？没有的话是怎么知道如何走到某个位置的？"
    没有。造训练数据的时候因为有路径规划，一定会用到位置。但是我们采样出的训练数据是不带位置的。模型推理时也不会输入位置。知道如何移动是需要靠视觉来理解空间的，就像人一样，我们只输入视觉，并没有GPS精确知道我们的3维坐标，也可以正确移动。

??? "这个系统看起来可以实时交互，每秒几十帧的情况下模型推理的吞吐量能到达要求吗？"
    如果每帧都推理，这个推理量对大模型肯定不行，所以从设计上我们考虑大模型的计算量，部署时并不是每帧都推理。与许多其他环境的离散行动不同，这个环境的action是连续的，并且是带跨度的，例如move_forward(0.3m)，直到0.3m走完，才进行下一步推理，这中间就会有许多帧。当然在生成训练数据时，为了提高采样速度，直接“瞬移”就可以。
